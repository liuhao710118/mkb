# Vim 编辑器使用文档

## 1. Vim 简介

Vim（Vi IMproved）是一个功能强大的文本编辑器，是Unix系统默认编辑器vi的增强版。特点包括：

- 完全通过键盘操作，提高编辑效率
- 支持高度定制和扩展
- 跨平台（Linux、macOS、Windows）
- 轻量级，可在终端中运行

## 2. 安装与启动

### 安装

- **Linux**: `sudo apt install vim`(Ubuntu/Debian) 或 `sudo yum install vim`(CentOS/RHEL)
- **macOS**: `brew install vim`
- **Windows**: 下载安装包或通过Chocolatey安装

### 启动

```
vim 文件名          # 编辑指定文件
vim                # 启动vim
vim +10 文件名     # 打开文件并跳转到第10行
vim +/搜索词 文件名 # 打开文件并搜索指定内容
```

## 3. 基本概念：模式

Vim有四种主要模式：

### 正常模式（Normal Mode）

- 启动后的默认模式
- 用于导航和执行命令
- 按 `Esc`键从其他模式返回

### 插入模式（Insert Mode）

- 用于输入文本
- 从正常模式按 `i`、`a`、`o`等键进入

### 可视模式（Visual Mode）

- 用于选择文本
- 按 `v`（字符选择）、`V`（行选择）或 `Ctrl+v`（块选择）进入

### 命令行模式（Command-Line Mode）

- 执行命令
- 从正常模式按 `:`进入

## 4. 基本操作

### 4.1 保存与退出

| 命令         | 功能             |
| ------------ | ---------------- |
| `:w`         | 保存文件         |
| `:q`         | 退出vim          |
| `:q!`        | 强制退出，不保存 |
| `:wq`或 `ZZ` | 保存并退出       |
| `:w 文件名`  | 另存为           |

### 4.2 移动光标

| 命令     | 功能                 | 记忆技巧                |
| -------- | -------------------- | ----------------------- |
| `h`      | 向左移动             | **h**左                 |
| `j`      | 向下移动             | **j**下（像向下的箭头） |
| `k`      | 向上移动             | **k**上                 |
| `l`      | 向右移动             | **l**右                 |
| `w`      | 移动到下一个单词开头 | **w**ord                |
| `b`      | 移动到上一个单词开头 | **b**ack                |
| `e`      | 移动到单词末尾       | **e**nd                 |
| `0`      | 移动到行首           | 零起点                  |
| `$`      | 移动到行尾           | 美元符号在结尾          |
| `gg`     | 移动到文件开头       | **g**o to be**g**inning |
| `G`      | 移动到文件末尾       | **G**o to end           |
| `Ctrl+f` | 向下翻页             | **f**orward             |
| `Ctrl+b` | 向上翻页             | **b**ackward            |

### 4.3 插入文本

| 命令 | 功能                 |
| ---- | -------------------- |
| `i`  | 在光标前插入         |
| `I`  | 在行首插入           |
| `a`  | 在光标后插入         |
| `A`  | 在行尾插入           |
| `o`  | 在下方新建一行并插入 |
| `O`  | 在上方新建一行并插入 |

### 4.4 删除文本

| 命令       | 功能             |
| ---------- | ---------------- |
| `x`        | 删除光标处的字符 |
| `dd`       | 删除整行         |
| `dw`       | 删除一个单词     |
| `d$`或 `D` | 删除到行尾       |
| `d0`       | 删除到行首       |

### 4.5 复制、粘贴与撤销

| 命令     | 功能           |
| -------- | -------------- |
| `yy`     | 复制整行       |
| `yw`     | 复制一个单词   |
| `p`      | 在光标后粘贴   |
| `P`      | 在光标前粘贴   |
| `u`      | 撤销上一次操作 |
| `Ctrl+r` | 重做           |

### 4.6 搜索与替换

```
/关键词      # 向前搜索
?关键词      # 向后搜索
n          # 查找下一个匹配项
N          # 查找上一个匹配项
:%s/旧/新/g # 全局替换
:5,10s/旧/新/g # 替换5-10行
```

## 5. 高级功能

### 5.1 分屏操作

```
:sp 文件名    # 水平分割窗口
:vsp 文件名   # 垂直分割窗口
Ctrl+w w     # 切换窗口
Ctrl+w q     # 关闭当前窗口
Ctrl+w v     # 垂直分割当前文件
Ctrl+w s     # 水平分割当前文件
```

### 5.2 标签页

```
:tabnew 文件名  # 新建标签页
:tabn         # 下一个标签页
:tabp         # 上一个标签页
gt           # 下一个标签页
gT           # 上一个标签页
```

### 5.3 宏录制

1. `q`+ 寄存器名（如`a`）开始录制
2. 执行一系列操作
3. `q`停止录制
4. `@`+ 寄存器名 执行宏
5. `@@`重复上次宏

### 5.4 多文件操作

```
:args 文件1 文件2  # 打开文件列表
:next              # 下一个文件
:prev              # 上一个文件
:first             # 第一个文件
:last              # 最后一个文件
```

## 6. 配置与插件

### 6.1 配置文件

Vim配置文件位于 `~/.vimrc`（Linux/macOS）或 `$HOME/_vimrc`（Windows）

### 6.2 常用配置示例

```
" 基本设置
set number          " 显示行号
set relativenumber  " 显示相对行号
syntax on           " 语法高亮
set tabstop=4       " Tab宽度为4个空格
set shiftwidth=4    " 自动缩进宽度
set expandtab       " 将Tab转换为空格
set autoindent      " 自动缩进

" 搜索设置
set ignorecase      " 搜索忽略大小写
set smartcase       " 如果包含大写则区分大小写
set hlsearch        " 高亮搜索结果
set incsearch       " 实时搜索

" 其他设置
set mouse=a         " 启用鼠标
set cursorline      " 高亮当前行
set showmatch       " 显示匹配的括号
```

### 6.3 插件管理器

- **Vim-plug**: 轻量级插件管理器
- **Vundle**: 流行的插件管理器
- **Pathogen**: 简单的插件管理器

### 6.4 常用插件推荐

1. **NERDTree** - 文件浏览器
2. **vim-airline** - 状态栏增强
3. **coc.nvim** - 智能补全
4. **fzf.vim** - 模糊查找
5. **vim-commentary** - 快速注释

## 7. 实用技巧

### 7.1 快捷键

- `.`重复上一次修改
- `*`搜索当前光标下的单词
- `%`在匹配的括号间跳转
- `Ctrl+a`增加数字
- `Ctrl+x`减少数字
- `Ctrl+p`自动补全

### 7.2 批量操作

1. 进入可视块模式：`Ctrl+v`
2. 选择区域
3. 输入命令（如`I`插入、`A`追加、`d`删除等）

### 7.3 寄存器

Vim有多个寄存器：

- 无名寄存器 `"`
- 有名寄存器 `a-z`
- 系统剪贴板 `+`
- 示例：`"ayy`复制到寄存器a，`"ap`从寄存器a粘贴

## 8. 学习资源

### 练习工具

- **vimtutor**: 内置教程，终端输入 `vimtutor`
- **Vim Adventures**: 游戏化学习网站
- **Open Vim**: 在线交互教程

### 参考文档

- `:help`- Vim内置帮助
- Vim官方文档：https://www.vim.org/docs.php
- 速查表：https://vim.rtorr.com/

### 学习建议

1. 从 `vimtutor`开始，完成所有练习
2. 先掌握基本移动、编辑、保存退出
3. 逐步学习更高级的功能
4. 定期使用，形成肌肉记忆
5. 创建自己的 `.vimrc`配置文件

------

## 快速参考卡片

### 模式切换

```
i → 插入模式
Esc → 正常模式
v → 可视模式
: → 命令行模式
```

### 常用组合命令

```
d + 移动命令 → 删除
y + 移动命令 → 复制
c + 移动命令 → 修改
> + 移动命令 → 缩进
< + 移动命令 → 反缩进
```

### 数字前缀

大多数命令前可以加数字表示重复次数：

- `3dd`删除3行
- `5j`向下移动5行
- `2p`粘贴两次