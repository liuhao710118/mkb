# 📝 **cut 命令是什么？**

`cut` 用于从文本的 **每一行** 中提取指定的：

- 字符（按位置）
- 字节（byte）
- 列（通过分隔符）

非常高效，适合集合 `sort`、`grep`、`uniq` 等进行文本处理。

------

# 📌 一、基本语法

```bash
cut OPTION... [FILE...]
```

如果不指定文件，则从标准输入读取。

------

# 📌 二、cut 的三个核心模式

| 模式     | 参数 | 说明                              |
| -------- | ---- | --------------------------------- |
| 字节选择 | `-b` | 按字节位置提取                    |
| 字符选择 | `-c` | 按字符位置提取（支持 UTF-8 字符） |
| 字段选择 | `-f` | 按指定分隔符提取字段（最常用）    |

------

# 📌 三、字段提取（最常用）

## 1. 指定分隔符（-d）+ 提取字段（-f）

### 示例文件：

```txt
alice,30,dev
bob,25,qa
carol,20,ops
```

### ✔ 提取第 1 列：

```bash
cut -d ',' -f 1 people.csv
```

输出：

```
alice
bob
carol
```

------

## 2. 提取多个字段

```bash
cut -d ',' -f 1,3 people.csv
```

------

## 3. 提取字段范围（N-M）

- `1-3`：第1列到第3列
- `3-`：第3列到行尾
- `-2`：第1列到第2列

示例：

```bash
cut -d ',' -f 2- people.csv
```

------

# 📌 四、字符提取（-c）

适合固定宽度文本。

### 示例：

```txt
abcdefg
```

### ✔ 提取第 1~3 个字符：

```bash
cut -c 1-3
```

输出：

```
abc
```

------

# 📌 五、字节提取（-b）

⚠ 与字符不同，中文常用 UTF-8，一个中文字符 = 3 字节。

### 示例：

```txt
你好世界
cut -b 1-3
```

输出：

```
你
```

（因为“你”占 3 字节）

如果使用 `-c` 才是按字符：

```bash
cut -c 1
```

------

# 📌 六、忽略不包含分隔符的行（-s）

默认情况下，当一行没有指定分隔符时，cut 会原样输出。

```
cut -d ',' -f 2 file.txt
```

可能出现：

```
(value)
(value)
原样输出的行 ← 这是你不想要的
```

使用：

```bash
cut -d ',' -f 2 -s file.txt
```

只输出含分隔符的行。

------

# 📌 七、与 stdin 结合

你可以直接处理管道输入：

### ✔ 从 ps 中提取 PID 列：

```bash
ps aux | cut -c 1-5
```

或更精确按空格分隔：

```bash
ps aux | tr -s ' ' | cut -d ' ' -f 2
```

------

# 📌 八、cut 的限制（非常重要）

### ❌ 无法按正则分隔

cut **只支持单字符分隔符**。

如果你需要：

- 多字符分隔符（如 `:::`）
- 正则分隔
- 忽略连续空格

建议使用 `awk`：

```bash
awk -F ':::' '{print $2}'
```

------

# 📌 九、实用示例大全

### ✔ 提取 PATH 里的每个目录：

```bash
echo $PATH | tr ':' '\n' | cut -d '/' -f 2
```

------

### ✔ 查看 /etc/passwd 的用户名

```bash
cut -d ':' -f 1 /etc/passwd
```

------

### ✔ 查看所有用户的 home 目录

```bash
cut -d ':' -f 6 /etc/passwd
```

------

### ✔ 提取 nginx 日志中的访问路径

假设格式：

```
IP - - time "GET /api/user HTTP/1.1" ...
```

方法：

```bash
cut -d '"' -f 2 access.log | cut -d ' ' -f 2
```

------

### ✔ 提取 CSV 中第 2 列到最后列

```bash
cut -d ',' -f 2-
```

------

# 📌 十、cut vs awk

| 功能         | cut  | awk  |
| ------------ | ---- | ---- |
| 单字符分隔符 | ✔    | ✔    |
| 正则分隔符   | ❌    | ✔    |
| 多列提取     | ✔    | ✔    |
| 数值计算     | ❌    | ✔    |
| 条件过滤     | ❌    | ✔    |
| 修改列顺序   | ❌    | ✔    |

👉 文本简单提取用 `cut`
 👉 复杂逻辑处理用 `awk`

------

# 🎯 总结

`cut` 是一个高效的文本列提取工具，核心要点：

- `-d` 指定分隔符
- `-f` 提取字段（最常用）
- `-c` 按字符
- `-b` 按字节
- `-s` 忽略无分隔符的行

常用于日志、CSV、命令输出的字段处理。

