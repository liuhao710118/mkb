# **Linux `ps` 命令教程文档**

`ps`（process status）用于显示系统中正在运行的进程信息，是 Linux 排查性能、定位进程资源占用、管理应用的重要工具。

相比 `top`（实时监控），`ps` 更适合 **快速查询当前某一时刻的进程信息**。

------

# **一、基本语法**

```
ps [选项]
```

`ps` 有几种不同的参数格式：

- **UNIX 风格**：`ps -ef`
- **BSD 风格**：`ps aux`
- **GNU 风格**：`ps --sort`

------

# **二、常用选项说明**

| 选项            | 风格 | 说明                          |
| --------------- | ---- | ----------------------------- |
| **-e**          | UNIX | 显示所有进程                  |
| **-f**          | UNIX | 完整格式（显示 PPID、用户等） |
| **-u 用户**     | UNIX | 显示某用户进程                |
| **-p pid**      | UNIX | 显示指定 PID                  |
| **aux**         | BSD  | 显示所有进程（最常用）        |
| **-o 格式**     | GNU  | 指定输出字段                  |
| **--sort 字段** | GNU  | 排序输出                      |

------

# **三、常用进程查询命令**

## **1. 显示所有进程（最常用）**

### 方式 1：UNIX 风格

```
ps -ef
```

### 方式 2：BSD 风格（更常用）

```
ps aux
```

------

## **2. 按 CPU 使用率排序**

```
ps aux --sort=-%cpu
```

------

## **3. 按内存使用率排序**

```
ps aux --sort=-%mem
```

------

## **4. 查看某个用户的进程**

```
ps -u root
```

------

## **5. 搜索某个进程（配合 grep）**

```
ps -ef | grep nginx
```

------

## **6. 查看某个 PID 的进程**

```
ps -p 1234
```

------

## **7. 以树状结构显示进程父子关系**

```
ps -ef --forest
```

可查看 systemd、nginx、java 子进程等结构。

------

# **四、常用字段说明**

`ps -ef` 输出字段：

| 字段      | 含义          |
| --------- | ------------- |
| **UID**   | 用户名        |
| **PID**   | 进程 ID       |
| **PPID**  | 父进程 ID     |
| **C**     | CPU 占用率    |
| **STIME** | 进程启动时间  |
| **TTY**   | 关联终端      |
| **TIME**  | 累计 CPU 时间 |
| **CMD**   | 进程命令内容  |

------

`ps aux` 输出字段：

| 字段        | 含义           |
| ----------- | -------------- |
| **USER**    | 进程所属用户   |
| **PID**     | 进程 ID        |
| **%CPU**    | CPU 使用率     |
| **%MEM**    | 内存使用率     |
| **VSZ**     | 虚拟内存占用   |
| **RSS**     | 实际占用的内存 |
| **STAT**    | 状态           |
| **START**   | 启动时间       |
| **TIME**    | 占用 CPU 时间  |
| **COMMAND** | 启动命令       |

------

# **五、进程状态 STAT 字段说明（常见）**

| 状态  | 含义                            |
| ----- | ------------------------------- |
| **R** | 运行中                          |
| **S** | 休眠                            |
| **D** | 不可中断睡眠（通常是 I/O 问题） |
| **T** | 停止                            |
| **Z** | 僵尸进程（Zombie）              |
| **<** | 高优先级                        |
| **N** | 低优先级                        |
| **s** | 进程是 session leader           |
| **l** | 多线程进程                      |
| **+** | 前台进程                        |

------

# **六、筛选 + 高级技巧**

## **1. 查看占用内存前 10 的进程**

```
ps aux --sort=-%mem | head -10
```

------

## **2. 查看占用 CPU 前 10 的进程**

```
ps aux --sort=-%cpu | head -10
```

------

## **3. 查看某程序的完整启动命令**

例如：

```
ps -ef | grep java
```

------

## **4. 查看特定进程的线程**

```
ps -T -p 1234
```

------

## **5. 自定义输出字段**

例如只输出 PID、用户、命令：

```
ps -eo pid,user,cmd
```

------

# **七、常见排查场景**

------

## **1. 找占用 CPU 高的进程**

```
ps aux --sort=-%cpu | head
```

------

## **2. 找占用内存高的进程**

```
ps aux --sort=-%mem | head
```

------

## **3. 判断是否存在僵尸进程**

```
ps aux | grep Z
```

STAT 列如果为 `Z` 为僵尸进程。

------

## **4. 查看进程树，确认父子进程结构**

```
ps -ef --forest
```

------

# **八、最常用命令总结（必背）**

```
ps -ef                # 显示所有进程（完整格式）
ps aux                # 显示所有进程（常用）
ps -ef | grep xxx     # 查找进程
ps aux --sort=-%cpu   # 按 CPU 排序
ps aux --sort=-%mem   # 按内存排序
ps -p PID             # 查看指定进程
ps -T -p PID          # 查看进程线程
ps -eo pid,user,cmd   # 自定义输出字段
```

