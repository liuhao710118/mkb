# 🗑️ **userdel 命令详解**

`userdel` 用于 **删除用户账号**，只能由 root 执行。

------

# 🧩 **基本语法**

```bash
userdel [选项] 用户名
```

------

# 📌 **常用选项**

| 选项 | 说明                           |
| ---- | ------------------------------ |
| `-r` | 同时删除用户的家目录与邮件目录 |
| `-f` | 强制删除用户，即使用户正在登录 |

------

# 🧪 **常用示例**

------

### ⭐ 1. **删除用户但保留家目录**

```bash
userdel username
```

用户账号删除，但 `/home/username` 目录还在。

------

### ⭐ 2. **删除用户及其家目录（最常用）**

```bash
userdel -r username
```

会删除：

- `/home/username/`
- `/var/spool/mail/username`（邮件目录）

------

### ⭐ 3. **强制删除用户**

当用户正在登录或进程仍在运行时：

```bash
userdel -f username
```

⚠️ **风险大**：不建议轻易使用，会导致孤儿进程、文件属主变成数字 UID。

------

### ⭐ 4. 删除后检查是否有遗留文件

可以查找系统中还属于该 UID 的文件：

```bash
find / -uid 1001
```

（1001 为该用户被删除前的 UID）

------

# 🧨 ⚠️ 注意事项

1. **用户正在登录**时，`userdel` 默认会失败，除非 `-f`。
2. 删除用户不会自动删除其创建的文件（除非你找出来并处理）。
3. 如果用户是某些服务的运行用户（如 nginx、mysql），删除前务必检查服务依赖。
4. 如果用户正在使用 crontab，也要手动检查：

```bash
ls /var/spool/cron/
```

------

# 📦 删除用户相关文件汇总

| 位置                   | 内容                         |
| ---------------------- | ---------------------------- |
| `/etc/passwd`          | 用户账号信息                 |
| `/etc/shadow`          | 用户密码信息                 |
| `/etc/group`           | 用户所属组信息               |
| `/home/用户`           | 用户家目录（需 `-r` 才删除） |
| `/var/spool/mail/用户` | 邮件目录（`-r` 删除）        |

