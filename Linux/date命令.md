
# 🕐 Linux `date` 命令使用教程

## 一、命令简介

`date` 命令用于显示或设置系统的日期与时间。
 它是 Linux 系统中最基础、最常用的时间工具之一，几乎所有日志、脚本、任务调度都会用到。

------

## 二、命令格式

```bash
date [OPTION]... [+FORMAT]
date [-u|--utc|--universal] [MMDDhhmm[[CC]YY][.ss]]
```

- 当使用 `+FORMAT` 时 → **显示时间**
- 当使用 `-s` 或日期参数时 → **设置时间**

------

## 三、命令功能概览

| 功能                         | 命令示例                        |
| ---------------------------- | ------------------------------- |
| 显示当前系统时间             | `date`                          |
| 显示指定格式的时间           | `date "+%Y-%m-%d %H:%M:%S"`     |
| 显示指定时间字符串对应的时间 | `date -d "next Friday"`         |
| 显示某文件的修改时间         | `date -r filename`              |
| 设置系统时间                 | `date -s "2025-10-25 15:30:00"` |
| 使用 UTC 时间                | `date -u`                       |

------

## 四、常用选项详解

### 1️⃣ 显示或计算时间

| 选项                   | 说明                                       |
| ---------------------- | ------------------------------------------ |
| `-d, --date=STRING`    | 显示由字符串描述的时间，而不是当前时间     |
| `-f, --file=DATEFILE`  | 从文件读取时间描述，每行一个，依次输出结果 |
| `-r, --reference=FILE` | 显示文件的最后修改时间                     |
| `-u, --utc`            | 以 UTC（世界协调时）显示或设置时间         |

**示例：**

```bash
date -d "yesterday"                # 昨天
date -d "2 days ago"               # 两天前
date -d "next Friday"              # 下周五
date -r /etc/passwd                # 文件的修改时间
```

------

### 2️⃣ 输出格式选项

| 选项                  | 说明                         |
| --------------------- | ---------------------------- |
| `-I[TIMESPEC]`        | 输出 ISO-8601 格式的日期时间 |
| `-R, --rfc-2822`      | 输出 RFC 2822 邮件格式       |
| `--rfc-3339=TIMESPEC` | 输出 RFC 3339 格式           |
| `+FORMAT`             | 自定义格式输出               |

**示例：**

```bash
date -I                    # 2025-10-25
date -Iseconds             # 2025-10-25T15:42:31+08:00
date -R                    # Sat, 25 Oct 2025 15:42:31 +0800
date --rfc-3339=seconds    # 2025-10-25 15:42:31+08:00
```

------

### 3️⃣ 设置时间选项

| 选项                               | 说明                             |
| ---------------------------------- | -------------------------------- |
| `-s, --set=STRING`                 | 设置系统时间为 STRING 描述的时间 |
| 直接参数 `[MMDDhhmm[[CC]YY][.ss]]` | 传统格式设置日期                 |

**示例：**

```bash
date -s "2025-10-25 12:00:00"     # 设置日期和时间
date 102515002025.30               # 设为2025年10月25日15:00:30
```

> ⚠️ 注意：修改系统时间需要 **root 权限**

------

## 五、FORMAT（格式控制）说明

通过 `+FORMAT` 参数，`date` 可自定义时间输出格式。
 以下是最常用的时间格式控制符（根据 `--help` 整理）：

| 格式符 | 含义                       | 示例       |
| ------ | -------------------------- | ---------- |
| `%Y`   | 年（4位）                  | 2025       |
| `%y`   | 年（后两位）               | 25         |
| `%m`   | 月（01–12）                | 10         |
| `%d`   | 日（01–31）                | 25         |
| `%H`   | 小时（00–23）              | 15         |
| `%I`   | 小时（01–12）              | 03         |
| `%M`   | 分钟（00–59）              | 42         |
| `%S`   | 秒（00–60）                | 31         |
| `%T`   | 时间（等价 %H:%M:%S）      | 15:42:31   |
| `%R`   | 时间（小时:分钟）          | 15:42      |
| `%D`   | 日期（等价 %m/%d/%y）      | 10/25/25   |
| `%F`   | 日期（等价 %Y-%m-%d）      | 2025-10-25 |
| `%a`   | 星期缩写                   | Sat        |
| `%A`   | 星期全称                   | Saturday   |
| `%b`   | 月份缩写                   | Oct        |
| `%B`   | 月份全称                   | October    |
| `%p`   | AM/PM（大写）              | PM         |
| `%P`   | am/pm（小写）              | pm         |
| `%Z`   | 时区名                     | CST        |
| `%z`   | 时区偏移                   | +0800      |
| `%s`   | 自 1970-01-01 UTC 起的秒数 | 1766666551 |
| `%j`   | 当年的第几天               | 298        |
| `%w`   | 星期几（0=星期日）         | 6          |
| `%u`   | 星期几（1=星期一）         | 6          |

**示例：**

```bash
date "+%Y-%m-%d %H:%M:%S"     # 标准时间格式
date "+%A %B %d, %Y"          # Saturday October 25, 2025
date "+%s"                    # 输出当前时间戳
date -d "@2147483647"         # 将时间戳转为时间
```

------

## 六、格式控制符的修饰符

| 符号 | 说明                   |
| ---- | ---------------------- |
| `-`  | 不填充（默认填充0）    |
| `_`  | 以空格填充             |
| `0`  | 以零填充               |
| `^`  | 转大写（如果可用）     |
| `#`  | 转换大小写（相反形式） |

**示例：**

```bash
date "+%_d"   # 日期前补空格，如 ' 5'
date "+%-d"   # 不补零，如 '5'
```

------

## 七、字符串时间计算（`--date`）

`date -d` 的字符串支持非常强大，可用自然语言描述时间偏移。

| 示例                           | 说明           |
| ------------------------------ | -------------- |
| `date -d "yesterday"`          | 昨天           |
| `date -d "2 days ago"`         | 两天前         |
| `date -d "next Friday"`        | 下周五         |
| `date -d "1 month ago"`        | 一个月前       |
| `date -d "tomorrow 9:00"`      | 明天上午 9 点  |
| `date -d "2025-12-31 +2 days"` | 指定日期加两天 |

------

## 八、时间戳与转换

| 操作           | 命令                                |
| -------------- | ----------------------------------- |
| 获取当前时间戳 | `date +%s`                          |
| 将时间戳转日期 | `date -d "@1700000000"`             |
| 将日期转时间戳 | `date -d "2025-10-25 12:00:00" +%s` |

------

## 九、时区（TZ）使用

可临时修改时区环境变量 `TZ`：

```bash
TZ='America/New_York' date
TZ='Asia/Tokyo' date "+%Y-%m-%d %H:%M:%S"
```

**示例：**

```bash
TZ='America/Los_Angeles' date -d "09:00 next Fri"
```

------

## 十、实用技巧

### ✅ 显示格式化时间

```bash
date "+%Y/%m/%d %H:%M:%S"
```

### ✅ 查看某文件的修改时间

```bash
date -r /etc/passwd
```

### ✅ 生成日志文件名时间戳

```bash
date "+%Y%m%d-%H%M%S"
```

### ✅ 将秒转为人类可读时间

```bash
date -d "@$(date +%s)"
```

### ✅ 查看 UTC 时间

```bash
date -u "+%Y-%m-%d %H:%M:%S UTC"
```

------

## 十一、返回值状态

| 状态码 | 含义                     |
| ------ | ------------------------ |
| `0`    | 命令成功                 |
| `1`    | 参数错误或格式错误       |
| `2`    | 无法设置时间（权限不足） |

------

## 十二、总结与常用命令对照

| 需求         | 命令                                 |
| ------------ | ------------------------------------ |
| 当前日期时间 | `date`                               |
| 指定格式输出 | `date "+%Y-%m-%d %H:%M:%S"`          |
| 时间戳转换   | `date -d "@<timestamp>"`             |
| 查看文件时间 | `date -r file.txt`                   |
| 设置系统时间 | `sudo date -s "2025-10-25 15:30:00"` |
| 昨天日期     | `date -d "yesterday" "+%Y-%m-%d"`    |
| 一周前日期   | `date -d "-7 days" "+%Y-%m-%d"`      |
| UTC 时间     | `date -u`                            |

------

是否希望我帮你把这份教程整理成一份 **可打印 PDF 文件**（含命令对照表和常见格式示例）？
 📄 适合离线学习或放到服务器 `/root/` 下随时查阅。