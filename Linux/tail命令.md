# **Linux `tail` 命令教程文档**

`tail` 命令用于查看文件结尾部分的内容，默认显示 **最后 10 行**。常用于实时监控日志、查看文件末尾更新等。

------

## **一、基本语法**

```
tail [选项] [文件名]
```

若不指定文件名，则从标准输入读取（可与管道一起使用）。

------

## **二、常用选项**

| 选项             | 功能说明                                        |
| ---------------- | ----------------------------------------------- |
| **-n 数字**      | 显示最后的 n 行                                 |
| **-c 数字**      | 显示最后的 n 字节                               |
| **-f**           | 实时追踪文件内容变化（常用看日志）              |
| **-F**           | 类似 -f，但文件重建后会继续追踪（适合日志轮转） |
| **--pid=PID -f** | 当指定进程退出时停止跟踪                        |

------

## **三、常用示例**

### **1. 查看文件最后 10 行（默认）**

```
tail /var/log/messages
```

------

### **2. 查看文件最后 50 行**

```
tail -n 50 app.log
```

或简写：

```
tail -50 app.log
```

------

### **3. 查看文件最后 100 个字节**

```
tail -c 100 data.bin
```

------

### **4. 实时监控日志文件**

这是 `tail` 最常用的功能：

```
tail -f /var/log/nginx/access.log
```

文件新增内容会实时输出。

------

### **5. 文件被重新创建（日志轮转）仍能继续跟踪**

```
tail -F app.log
```

- `-F` 等同于 `--follow=name --retry`
- 当日志文件被轮转（删除/重建）时，可自动重新打开并继续跟踪。
- 对生产环境非常有用。

------

### **6. 结合管道查看过滤后的实时日志**

#### 查看实时 ERROR 日志：

```
tail -f app.log | grep ERROR
```

#### 查看含“timeout”的实时日志：

```
tail -F app.log | grep timeout
```

------

## **四、查看多个文件的结尾**

```
tail -n 20 file1.txt file2.txt
```

输出会显示文件名提示：

```
==> file1.txt <==
（最后20行）

==> file2.txt <==
（最后20行）
```

------

## **五、与 head 的区别**

| 命令     | 功能               |
| -------- | ------------------ |
| **head** | 查看文件“开头”部分 |
| **tail** | 查看文件“结尾”部分 |

组合常用于定位日志问题：

```
head -n 20 app.log   # 查看头部
tail -n 20 app.log   # 查看尾部
```

------

## **六、实战技巧**

### **1. 查看进程退出时自动停止日志输出**

```
tail --pid=1234 -f app.log
```

当 PID=1234 的进程退出时，tail 自动停止，非常适用于守护进程调试。

------

### **2. 查日志最新 10 行，并持续跟踪**

```
tail -n 10 -f app.log
```

------

### **3. 查看实时滚动文件的同时加行号**

```
tail -F app.log | nl
```

------

## **七、总结**

`tail` 是 Linux 运维与开发人员监控日志、排查故障的核心工具：

- 默认查看最后 10 行
- `-n` 控制行数
- `-f` 追踪文件更新
- `-F` 支持日志轮转
- 强力搭配管道与 grep

