# 👥 **who 命令详解**

`who` 用于 **查看当前登录系统的用户信息**，包括登录的用户名、登录终端、登录时间、来源 IP 等。

常用于排查系统是否被登录、查看多用户环境下当前谁在线等。

------

# 🧩 **基本语法**

```bash
who [选项]
```

------

# 📌 **输出内容说明**

执行：

```bash
who
```

可能输出：

```
root     pts/0        2025-01-12 08:21 (192.168.1.10)
user1    pts/1        2025-01-12 09:03 (10.0.0.5)
```

字段含义：

| 字段                 | 说明                               |
| -------------------- | ---------------------------------- |
| **root / user1**     | 当前登录的用户名                   |
| **pts/0 / pts/1**    | 登录使用的终端（SSH 会看到 pts/N） |
| **2025-01-12 08:21** | 登录时间                           |
| **(IP)**             | 登录来源 IP（通过 SSH 登录时显示） |

------

# 📌 常用选项

| 选项 | 说明                                                      |
| ---- | --------------------------------------------------------- |
| `-a` | 显示所有相关信息（等同于：`who -b -d -l -p -r -t -T -u`） |
| `-b` | 显示系统最近的启动时间                                    |
| `-m` | 只显示当前终端的登录用户                                  |
| `-q` | 显示用户数量和用户名列表                                  |
| `-u` | 显示用户闲置（idle）时间等信息                            |
| `-H` | 输出添加标题行（列名）                                    |

------

# 🧪 **常用示例**

------

### ⭐ 1. 查看当前在线用户

```bash
who
```

------

### ⭐ 2. 显示所有信息

```bash
who -a
```

------

### ⭐ 3. 只显示当前终端的用户

```bash
who -m
```

------

### ⭐ 4. 显示当前有多少用户在线

```bash
who -q
```

输出示例：

```
root user1 user2
# users=3
```

------

### ⭐ 5. 查看系统上次启动时间

```bash
who -b
```

示例：

```
         system boot  2025-01-10 06:22
```

------

### ⭐ 6. 显示用户闲置时间（是否在操作）

```bash
who -u
```

示例：

```
root     pts/0        2025-01-12 08:21   .       1234
```

说明：

- **`.`** → 当前活跃
- **idle 时间**（如 `00:15`）→ 15 分钟没操作
- 最后一列是进程 ID

------

# 🔍 对比其他命令

| 命令    | 作用                                   |
| ------- | -------------------------------------- |
| `who`   | 当前登录的用户                         |
| `w`     | 登录用户 + CPU + 负载 + 用户正在做什么 |
| `users` | 只显示用户名                           |
| `last`  | 历史登录记录                           |

