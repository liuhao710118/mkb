# 🖥️ **w 命令详解**

`w` 用于 **查看当前系统有哪些用户登录、系统负载情况、每个用户正在执行的命令等详细信息**。

是排查系统性能、查看谁正在使用服务器的常用命令。

------

# 🧩 **基本语法**

```bash
w [选项] [用户名]
```

------

# 📌 **w 命令输出说明**

执行：

```bash
w
```

可能输出：

```
 10:20:01 up 2 days,  3:17,  2 users,  load average: 0.17, 0.10, 0.15
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU  WHAT
root     pts/0    192.168.1.10     08:21    3:21   0.10s  0.10s bash
user1    pts/1    10.0.0.5         09:03       .   0.05s  0.01s top
```

### 第一行（系统信息）说明：

| 字段              | 含义                     |
| ----------------- | ------------------------ |
| `10:20:01`        | 当前时间                 |
| `up 2 days, 3:17` | 系统已运行时间（uptime） |
| `2 users`         | 当前登录用户数量         |
| `load average`    | 系统负载（1/5/15 分钟）  |

### 下面每行（用户信息）说明：

| 字段     | 含义                        |
| -------- | --------------------------- |
| `USER`   | 用户名                      |
| `TTY`    | 登录终端（SSH 为 pts/N）    |
| `FROM`   | 来源 IP                     |
| `LOGIN@` | 登录时间                    |
| `IDLE`   | 用户闲置时间                |
| `JCPU`   | 所有相关进程使用的 CPU 时间 |
| `PCPU`   | 当前正在执行的进程 CPU 时间 |
| `WHAT`   | 用户正在执行的命令          |

------

# 📌 **常用选项**

| 选项 | 说明                                     |
| ---- | ---------------------------------------- |
| `-h` | 隐藏标题行                               |
| `-s` | 短格式输出（不显示登录时间、JCPU、PCPU） |
| `-f` | 显示来源 IP（默认有时会隐藏）            |
| `-i` | 不显示 IP（与 `-f` 相反）                |
| `-V` | 显示版本                                 |

------

# 🧪 **常用示例**

------

### ⭐ 1. 显示所有在线用户（最常用）

```bash
w
```

------

### ⭐ 2. 显示更简洁的用户信息

```bash
w -s
```

------

### ⭐ 3. 显示带来源 IP 信息（如果系统默认隐藏）

```bash
w -f
```

------

### ⭐ 4. 查看特定用户的信息

```bash
w root
```

------

### ⭐ 5. 只显示当前终端用户（类似 `who -m`）

```bash
w -i
```

------

# 🔍 与其他命令比较

| 命令     | 功能                                 |
| -------- | ------------------------------------ |
| `who`    | 显示当前在线用户（较简单）           |
| `w`      | 显示用户 + 系统负载 + 正在执行的命令 |
| `users`  | 只显示用户名                         |
| `uptime` | 只显示系统运行时间和负载             |

