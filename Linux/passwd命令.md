# 🔐 **passwd 命令详解**

`passwd` 是用来 **设置或修改用户密码** 的命令，普通用户只能修改自己的密码，root 可以修改任何用户的密码，也可以锁定/解锁账户。

------

# 🧩 **基本语法**

```bash
passwd [选项] [用户名]
```

- **普通用户：**`passwd`  → 修改自己的密码
- **root 用户：**`passwd 用户名` → 修改指定用户的密码

------

# 📌 **常用选项**

| 选项      | 说明                                       |
| --------- | ------------------------------------------ |
| `-l`      | 锁定用户（lock account）                   |
| `-u`      | 解锁用户                                   |
| `-d`      | 删除密码（用户下次登录必须设置密码）       |
| `-S`      | 显示密码状态（加密方式、是否锁定等）       |
| `-e`      | 让密码立即过期（强制用户下次登录修改密码） |
| `-n DAYS` | 密码最短使用天数                           |
| `-x DAYS` | 密码最长使用天数                           |
| `-w DAYS` | 密码过期前提醒天数                         |

------

# 🧪 **常用操作示例**

------

### ⭐ **1. 给用户设置密码（root 执行）**

```bash
passwd username
```

系统将要求输入两次新密码。

------

### ⭐ **2. 用户修改自己的密码**

```bash
passwd
```

------

### ⭐ **3. 锁定用户（禁止登录）**

```bash
passwd -l username
```

相当于在 `/etc/shadow` 中给密码前加 `!`

------

### ⭐ **4. 解除锁定**

```bash
passwd -u username
```

------

### ⭐ **5. 删除密码**

```bash
passwd -d username
```

⚠️ 删除密码后用户可能无需密码即可登录（取决于登录策略）。

------

### ⭐ **6. 查看密码状态**

```bash
passwd -S username
```

示例输出：

```
username P 09/25/2023 0 99999 7 -1
```

------

### ⭐ **7. 强制用户下次登录修改密码**

```bash
passwd -e username
```

------

### ⭐ **8. 设置密码有效期策略**

```bash
passwd -n 7 -x 90 -w 10 username
```

含义：

- 最短使用 7 天
- 最长 90 天必须更换
- 提前 10 天提醒用户

------

# ❗ 常见问题

### Q：忘记 root 密码了怎么办？