# 🧭 vi 编辑器使用教程

------

## 一、vi 简介

`vi` 是 Unix/Linux 系统中最常用的文本编辑器之一，轻量、高效、几乎在所有系统中默认存在。
 在大多数现代系统中，`vi` 已被功能更丰富的 `vim`（Vi IMproved）所取代，但基本用法完全兼容。

------

## 二、启动与退出

### 启动 vi

```bash
vi filename
```

若文件不存在，`vi` 会新建一个同名文件。

### 退出 vi

| 命令          | 功能                   |
| ------------- | ---------------------- |
| `:q`          | 退出（文件未修改时）   |
| `:q!`         | 强制退出（不保存修改） |
| `:w`          | 保存（write）          |
| `:w filename` | 另存为                 |
| `:wq` 或 `:x` | 保存并退出             |
| `ZZ`          | 快捷键：保存并退出     |

------

## 三、vi 的三种模式

<img src="./assets/vi%E7%BC%96%E8%BE%91%E5%99%A8/image-20251106095131999.png" alt="image-20251106095131999" style="zoom:50%;" />

| 模式         | 说明                                                 | 切换方式                            |
| ------------ | ---------------------------------------------------- | ----------------------------------- |
| **命令模式** | 默认进入的模式，用于移动光标、删除、复制、粘贴等操作 | 启动 vi 或按 `Esc` 返回             |
| **插入模式** | 输入文字内容                                         | 在命令模式下按 `i`、`a`、`o` 等进入 |
| **底行模式** | 输入冒号命令，如保存、查找、替换                     | 在命令模式下输入 `:` 进入           |

------

## 四、进入插入模式的方法

| 命令 | 功能                       |
| ---- | -------------------------- |
| `i`  | 在光标前插入               |
| `a`  | 在光标后插入               |
| `I`  | 在行首插入                 |
| `A`  | 在行尾插入                 |
| `o`  | 在当前行下方新建一行并插入 |
| `O`  | 在当前行上方新建一行并插入 |

------

## 五、光标移动

| 命令 | 功能         |
| ---- | ------------ |
| `h`  | 左移一个字符 |
| `l`  | 右移一个字符 |
| `j`  | 下移一行     |
| `k`  | 上移一行     |
| `0`  | 跳到行首     |
| `$`  | 跳到行尾     |
| `G`  | 跳到文件末尾 |
| `gg` | 跳到文件开头 |
| `:n` | 跳到第 n 行  |

------

## 六、删除、复制与粘贴

| 命令       | 功能                |
| ---------- | ------------------- |
| `x`        | 删除光标所在字符    |
| `dd`       | 删除当前行          |
| `ndd`      | 删除从当前行起 n 行 |
| `yy`       | 复制当前行          |
| `nyy`      | 复制 n 行           |
| `p`        | 在光标后粘贴        |
| `P`        | 在光标前粘贴        |
| `u`        | 撤销上一步操作      |
| `Ctrl + r` | 重做                |

------

## 七、查找与替换

### 查找

| 命令    | 功能           |
| ------- | -------------- |
| `/word` | 向下查找“word” |
| `?word` | 向上查找“word” |
| `n`     | 查找下一个     |
| `N`     | 查找上一个     |

### 替换

| 命令             | 功能                     |
| ---------------- | ------------------------ |
| `:s/old/new/`    | 替换当前行第一个匹配项   |
| `:s/old/new/g`   | 替换当前行所有匹配项     |
| `:%s/old/new/g`  | 替换整个文件中所有匹配项 |
| `:%s/old/new/gc` | 替换前确认（confirm）    |

------

## 八、打开与切换多个文件

### 同时打开多个文件

```bash
vi file1 file2 file3
```

| 命令            | 功能             |
| --------------- | ---------------- |
| `:n`            | 打开下一个文件   |
| `:N` 或 `:prev` | 打开上一个文件   |
| `:args`         | 查看文件列表     |
| `:e filename`   | 直接打开指定文件 |

------

## 九、分屏操作（vim 支持）

| 命令           | 功能                   |
| -------------- | ---------------------- |
| `:sp file2`    | 水平分屏打开另一个文件 |
| `:vs file2`    | 垂直分屏打开另一个文件 |
| `Ctrl + w + w` | 在窗口之间切换         |
| `Ctrl + w + q` | 关闭当前分屏           |
| `:only`        | 只保留当前分屏         |

------

## 十、标签页（vim）

| 命令           | 功能           |
| -------------- | -------------- |
| `:tabnew file` | 新建标签页     |
| `:tabn` / `gt` | 下一个标签页   |
| `:tabp` / `gT` | 上一个标签页   |
| `:tabs`        | 查看所有标签页 |

------

## 十一、批量保存与退出

| 命令           | 功能               |
| -------------- | ------------------ |
| `:wa`          | 保存所有文件       |
| `:qa`          | 退出所有文件       |
| `:wqa` / `:xa` | 保存并退出所有文件 |

------

## 十二、实用小技巧

- `.`：重复上一次命令
- `>>`：整行右缩进
- `<<`：整行左缩进
- `Ctrl + g`：显示当前文件名、行号、百分比
- `:%!sort`：将整个文件按行排序

------

## 十三、帮助系统

在命令模式输入：

```bash
:help
```

或查看具体帮助：

```bash
:help :w
:help movement
```

------

## 十四、退出总结

- `:wq` 保存并退出
- `:q!` 不保存退出
- `ZZ` 保存并退出（无需冒号）